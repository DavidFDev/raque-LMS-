import{d as w,r as t,P as y,e as k,f as B,j as s,M as p,F as S}from"./index-iwJBcb3x.js";import{P as _}from"./index-DQZfgQhJ.js";import{L as P,c as C}from"./Spinner-Voe-17H8.js";const A=()=>{const{id:c}=w(),[h,a]=t.useState(!1);t.useContext(y);const[e,n]=t.useState(null);t.useEffect(()=>{a(!0);async function b(){try{const r=await(await fetch(`https://openlibrary.org/works/${c}.json`)).json();if(r){const{description:d,title:g,covers:j,subject_places:m,subject_times:u,subjects:x}=r,v={description:d?d.value:"No description found",title:g,cover_img:j?`https://covers.openlibrary.org/b/id/${j[0]}-L.jpg`:C,subject_places:m?m.join(", "):"No subject places found",subject_times:u?u.join(", "):"No subject times found",subjects:x?x.join(", "):"No subjects found"};n(v)}else n(null);a(!1)}catch(o){console.log(o),a(!1)}}b()},[c]),t.useState({}),t.useState([]),t.useState([]);const i=k(),{returnDate:f,isExpired:l}=B(),N=()=>{i("/books")};return s.jsx(s.Fragment,{children:h?s.jsx("div",{className:"d-flex justify-content-center",style:{height:"100vh"},children:s.jsx(P,{})}):s.jsxs("div",{className:"reading-page",children:[s.jsxs("div",{className:"due-dates d-flex align-items-center justify-content-center gap-5",children:[s.jsxs("button",{type:"button",className:"default-btn",onClick:N,children:[s.jsx(p,{className:"start-icon"}),s.jsx("span",{className:"label",children:l?"Borrow for 1 hour":"Return now"}),s.jsx(p,{className:"end-icon"})]}),s.jsxs("div",{className:"due-date gap-3",children:[l?s.jsx("span",{children:"Your loan has expired"}):s.jsxs("span",{children:["Borrow ends at - ",f]}),s.jsx("span",{children:s.jsx(_,{className:"fs-3"})})]})]}),s.jsx("section",{className:"book-details",children:s.jsxs("div",{className:"container",children:[s.jsxs("button",{type:"button",className:"d-flex align-items-center back-btn",onClick:()=>i("/books"),children:[s.jsx(S,{size:22}),s.jsx("span",{className:"fs-18 fw-bolder",children:"Go Back"})]}),e&&s.jsxs("div",{className:"book-details-content row",children:[s.jsx("div",{className:"book-details-img col-12 col-lg-6",children:s.jsx("img",{src:e==null?void 0:e.cover_img,alt:"cover img"})}),s.jsxs("div",{className:"book-details-info col-12 col-lg-6",children:[s.jsx("div",{className:"book-details-item title",children:s.jsx("span",{className:"fw-bold fs-3",children:e==null?void 0:e.title})}),s.jsx("div",{className:"book-details-item description",children:s.jsx("span",{children:e==null?void 0:e.description})}),s.jsxs("div",{className:"book-details-item",children:[s.jsx("span",{className:"fw-bold",children:"Subject Places: "}),s.jsx("span",{className:"text-italic",children:e==null?void 0:e.subject_places})]}),s.jsxs("div",{className:"book-details-item",children:[s.jsx("span",{className:"fw-bold",children:"Subject Times: "}),s.jsx("span",{className:"text-italic",children:e==null?void 0:e.subject_times})]}),s.jsxs("div",{className:"book-details-item",children:[s.jsx("span",{className:"fw-bold",children:"Subjects: "}),s.jsx("span",{children:e==null?void 0:e.subjects})]})]})]})]})})]})})};export{A as default};
